From b751602d8cb7194ee62a61e085069679525138c4 Mon Sep 17 00:00:00 2001
From: nvcexploder <benacker@gmail.com>
Date: Thu, 25 Sep 2014 16:06:07 -0700
Subject: [PATCH] Remove eval statement

---
 lib/batch.js | 10 ++--------
 1 file changed, 2 insertions(+), 8 deletions(-)

diff --git a/lib/batch.js b/lib/batch.js
index fe98963..e0cbabf 100644
--- a/lib/batch.js
+++ b/lib/batch.js
@@ -146,16 +146,10 @@ internals.batch = function (batchRequest, resultsData, pos, parts, callback) {
             var ref = resultsData.resultsMap[parts[i].index];
 
             if (ref) {
-                var value = null;
-
-                try {
-                    eval('value = ref.' + parts[i].value + ';');
-                }
-                catch (e) {
-                    error = new Error(e.message);
-                }
+                var value = ref[parts[i].value]||null;
 
                 if (value) {
+
                     if (value.match && value.match(/^[\w:]+$/)) {
                         path += value;
                     }
